<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="quiz.css">
    <link rel="stylesheet" href="estilodash.css">
    <script src="../js/funcoes.js"></script>
   
    <title>Document</title>
</head>

    
    <body >
    
        <div class="janela">
            <div class="header-left">
                <h1>One Project</h1>
    
                <div class="hello">
                    <h3>Ol√°, <span id="b_usuario">usu√°rio</span>!</h3>
                </div>
    
                
                    <div class="btn-nav">
                    <a href="">
                        <h3>Quiz</h3>
                    </a>
                </div>
    
                <div class="btn-nav-white">
                   <a href="dashboard.html">
                    <h3>Gr√°ficos</h3>
                </a>
                </div>
    
                <div class="btn-nav-white">
                    <a href="./mural.html">
                        <h3>Mural de coments</h3>
                    </a>
                </div>
    
                <div class="btn-logout" onclick="limparSessao()">
                    <h3>Sair</h3>
                </div>
    
            </div>

    <div class="banner">
        <div class="alerta_erro">
            <div class="card_erro" id="cardErro">
                <span id="mensagem_erro"></span>
            </div>
        </div>
        <div class="container">
            <div class="caixa-quiz" id="caixa_quiz">
                <p>Voc√™ entende mesmo de one piece?</p>
                <img src="" alt="" id="imgdoquiz">
                <button onclick="pergunta1()">Iniciar quiz!</button>
            </div>
            <div class="loading-div" id="div_aguardar">
                <img src="./assets/circle-loading.gif" alt="" id="loading-gif">
                   </div>
        </div>
    </div>


    
</body>

</html>
<script>
    b_usuario.innerHTML=sessionStorage.USER_USUARIO
    
    var respostas_certas = 0
    var respostas=[]

    var um=0
    var dois=0
    var tres=0
    var quatro=0
    var cinco=0
    var seis=0
    var sete=0
    var oito=0
    var nove=0
    var dez=0


    function pergunta1() {

        caixa_quiz.innerHTML = `<p>Qual o nome desse personagem?</p>
        <img src="../assets/gaimon.jpg" alt="" id="imgdoquiz">
        <input id="in_resposta">
        <button onclick="pergunta2()">Responder</button>    
        `
        

       
    }

    function pergunta2() {
        var resposta = in_resposta.value.toUpperCase()
        if (resposta == 'GAIMON') {
            respostas_certas++
        um++
        } 
       respostas.push(resposta)


        caixa_quiz.innerHTML = `<p>Qual o nome do primeiro vil√£o que Luffy enfrentou?</p>
        <img src="../assets/alvida.jpg" alt="" id="imgdoquiz">
        <input id="in_resposta">
        <button onclick="pergunta3()">Responder</button>  
`

    }

    function pergunta3() {
        var resposta = in_resposta.value.toUpperCase()
        if (resposta == 'ALVIDA') {
            respostas_certas++
            dois++
        } 
       
        respostas.push(resposta)

        caixa_quiz.innerHTML = `<p>Qual o nome desse personagem?üòè</p>
        <img src="../assets/pica.jpg" alt="" id="imgdoquiz">
        <input id="in_resposta">
        <button onclick="pergunta4()">Responder</button>  
`

    }

    function pergunta4() {
      
        var resposta = in_resposta.value.toUpperCase()
        if (resposta == 'PICA') {
            respostas_certas++
            tres++
        }

        respostas.push(resposta)
                
        caixa_quiz.innerHTML = `<p>"Eu n√£o quero conquistar nada, s√≥ acho que a pessoa com mais liberdade do mundo √© o rei dos piratas!" Em qual epis√≥dio do anime Luffy diz essa frease?</p>
        <img src="../assets/luffysorrindo.gif" alt="" id="imgdoquiz">
        <select id="sel_resposta">
    <option value="">--Escolha--</option>
    <option value="400">400</option>
    <option value="394">394</option>
    <option value="415">415</option>
    <option value="396">396</option>
   </select>
   
        <button onclick="pergunta5()">Responder</button>  
`
       

    }

    function pergunta5() {
        var resposta = Number(sel_resposta.value)
        if (resposta == 400) {
            respostas_certas++
            quatro++
        } 

        respostas.push(resposta)

        caixa_quiz.innerHTML = `<p>Em qual epis√≥dio Luffy usa a gear second pela primeira vez?</p>
        <img src="../assets/gearsecond.gif" alt="" id="imgdoquiz">
        <select id="sel_resposta">
    <option value="">--Escolha--</option>
    <option value="270">270</option>
    <option value="272">272</option>
    <option value="275">275</option>
    <option value="282">282</option>
   </select>
   
        <button onclick="pergunta6()">Responder</button>  
`
        
    }

    function pergunta6() {
        var resposta = Number(sel_resposta.value)
        if (resposta == 272) {
            respostas_certas++
            cinco++
        } 
respostas.push(resposta)
        
        caixa_quiz.innerHTML = `<p>Em que ano One Piece foi lan√ßado?</p>
        <img src="../assets/onepiece.gif" alt="" id="imgdoquiz">
        <select id="sel_resposta">
    <option value="">--Escolha--</option>
    <option value="1994">1994</option>
    <option value="1996">1996</option>
    <option value="1997">1997</option>
    <option value="1999">1999</option>
   </select>
   
        <button onclick="pergunta7()">Responder</button>  
`
        
    }

    function pergunta7() {
        var resposta = Number(sel_resposta.value)
        if (resposta == 1997) {
            respostas_certas++
            seis++
        } 
        respostas.push(resposta)
        
        caixa_quiz.innerHTML = `<p>Qual o verdadeiro nome do rei dos Piratas?</p>
        <img src="../assets/goldroger.jpg" alt="" id="imgdoquiz">
        <input id="in_resposta">
        <button onclick="pergunta8()">Responder</button>  
`
       

    }

    function pergunta8() {
        var resposta = in_resposta.value.toUpperCase()
        if (resposta == 'GOL D. ROGER') {
            respostas_certas++
            sete++
        } 
        
        respostas.push(resposta)

        caixa_quiz.innerHTML = `<p>Qual o nome do Barba branca?</p>
        <img src="../assets/newgate.jpg" alt="" id="imgdoquiz">
        <input id="in_resposta">
        <button onclick="pergunta9()">Responder</button>  
`
        

    }
    function pergunta9() {
        var resposta = in_resposta.value.toUpperCase()
        if (resposta == 'EDWARD NEWGATE') {
            respostas_certas++
            oito++
        } 
        
        respostas.push(resposta)

        caixa_quiz.innerHTML = `<p>Qual o nome dessa personagem?</p>
        <img src="../assets/boasandersonia.png" alt="" id="imgdoquiz">
        <input id="in_resposta">
        <button onclick="pergunta10()">Responder</button>  
`
        
    }

    function pergunta10() {
        var resposta = in_resposta.value.toUpperCase()
        if (resposta == 'BOA SANDERSONIA') {
            respostas_certas++
            nove++
        } 

       respostas.push(resposta)

        caixa_quiz.innerHTML = `<p>Qual o nome dessa personagem?</p>
        <img src="../assets/boamarigold.jpg" alt="" id="imgdoquiz">
        <input id="in_resposta">
        <button onclick="pontuacao()">Responder</button>  
`
        
    }

    function pontuacao(){
        var resposta = in_resposta.value.toUpperCase()
        if (resposta == 'BOA MARIGOLD') {
            respostas_certas++
            dez++
        }
       
        respostas.push(resposta)

        if(respostas_certas<=5){
            caixa_quiz.innerHTML=`<p>Voc√™ realmente assistiu one piece?</p>
        <img src="../assets/luffyrindo.gif" alt="" id="imgdoquiz">
        <p>Respostas certas:<span id="sp_certas"></span></p>

        <div id="div_respostas"></div>
        `
        } else{
            caixa_quiz.innerHTML=`<p> Ihhh assistiu o piratinha que estica mesmo</p>
        <img src="../assets/luffycrianca.gif" alt="" id="imgdoquiz">
        <p>Respostas certas:<span id="sp_certas"></span></p>
        <div id="div_respostas"></div>
        `
        }
       sp_certas.innerHTML=respostas_certas
    
     if(um==0){
        div_respostas.innerHTML=`Sua resposta:${respostas[0]} Resposta certa: Gaimon`
     }
   
     
     if(dois==0){
        div_respostas.innerHTML+=`Sua resposta:${respostas[1]} Resposta certa: Alvida `
     }

     if(tres==0){
        div_respostas.innerHTML+=`Sua resposta:${respostas[2]} Resposta certa: Pica `
     }

     if(quatro==0){
        div_respostas.innerHTML+=`Sua resposta:${respostas[3]} Resposta certa: 400 `
     }

     if(cinco==0){
        div_respostas.innerHTML+=`Sua resposta:${respostas[4]} Resposta certa: 272 `
     }

     if(seis==0){
        div_respostas.innerHTML+=`Sua resposta:${respostas[5]} Resposta certa: 1997 `
     }

     if(sete==0){
        div_respostas.innerHTML+=`Sua resposta:${respostas[6]} Resposta certa: Gol D. Roger`
     }

     if(oito==0){
        div_respostas.innerHTML+=`Sua resposta:${respostas[7]} Resposta certa: Edward Newgate`
     }

     if(nove==0){
        div_respostas.innerHTML+=`Sua resposta:${respostas[8]} Resposta certa: Boa Sandersonia`
     }

     if(dez==0){
        div_respostas.innerHTML+=`Sua resposta:${respostas[9]} Resposta certa: Boa Marigold `
     }
        aguardar();

        //Recupere o valor da nova input pelo nome do id
        // Agora v√° para o m√©todo fetch logo abaixo
       var totalVar=respostas_certas
        

        // Enviando o valor da nova input
        fetch("/quiz/pontuacao", {
            method: "POST",
            headers: {
                "Content-Type": "application/json"
            },
            body: JSON.stringify({
                // crie um atributo que recebe o valor recuperado aqui
                // Agora v√° para o arquivo routes/usuario.js
                totalServer:totalVar
        
            })
        }).then(function (resposta) {

            console.log("resposta: ", resposta);

            if (resposta.ok) {
                cardErro.style.display = "block";


               
                limparFormulario();
                finalizarAguardar();
            } else {
                throw ("Houve um erro ao tentar realizar o cadastro!");
            }
        }).catch(function (resposta) {
            console.log(`#ERRO: ${resposta}`);
            finalizarAguardar();
        });

        return false;
    

    }

    function sumirMensagem() {
        cardErro.style.display = "none"
    
    }


</script>